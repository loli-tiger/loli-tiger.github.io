<html>
<head>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://thunkable.github.io/webviewer-extension/thunkableWebviewerExtension.js" type="text/javascript"></script>
<style>
  #thinkingAnimation {
    position: fixed;
    bottom: 10px;
    left: 10px;
    font-family: Arial, sans-serif;
    display: none; /* 初始时隐藏动画 */
  }
  
  .thinking-dot {
    display: inline-block;
    animation: dotPulse 1.5s infinite;
    margin-left: 2px;
  }
  
  .thinking-dot:nth-child(2) {
    animation-delay: 0.3s;
  }
  
  .thinking-dot:nth-child(3) {
    animation-delay: 0.6s;
  }
  
  @keyframes dotPulse {
    0% { opacity: 0; }
    100% { opacity: 1; }
  }
</style>
</head>
<body>
    <span id="messageDisplay"></span>
    <div id="thinkingAnimation">思考中<span class="thinking-dot">.</span><span class="thinking-dot">.</span><span class="thinking-dot">.</span></div>
    <script type="text/javascript">
         ThunkableWebviewerExtension.receiveMessage(function(message) {
             // 显示动画
             document.getElementById('thinkingAnimation').style.display = 'inline';
             
             // 处理消息
             var html = marked.parse(message);
             document.getElementById('messageDisplay').innerHTML = html;
             
             // 处理完成后隐藏动画
             document.getElementById('thinkingAnimation').style.display = 'none';
              });
    </script>
</body>
</html>
